From: Samuel Thibault <samuel.thibault@ens-lyon.org>
Subject: [PATCH] Fix signal-catching functions.

2010-09-13  Samuel Thibault  <samuel.thibault@ens-lyon.org>

        Fix signal-catching functions.

        We need to restore the signal mask, because else the signal handling
        code will have blocked the catched signal and for instance calling
        hurd_catch_signal again would then dump core.  There was also a trivial
        inverted logic.

        * hurd/catch-signal.c (hurd_catch_signal): Use sigsetjmp/siglongjmp
        instead of setjmp/longjmp to restore the signal mask. Call sigsetjmp
        when handler == SIG_ERR, not when handler != SIG_ERR.

---

http://sourceware.org/ml/libc-alpha/2010-09/msg00015.html
