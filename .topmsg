From: Thomas Schwinge <thomas@schwinge.name>
Subject: [PATCH] libc_once

libc_once

Needed for HEAD and glibc-2_7-branch.

Patch originally by Thomas Schwinge.  Later rewritten by Debian's Aurelien
Jarno because of upstream glibc code changes.

Reported at <http://savannah.gnu.org/bugs/?18217> and
<http://sourceware.org/bugzilla/show_bug.cgi?id=3748>, where it was rejected by
Ulrich Drepper.  Roland promised to have a look.


r2630 of debian/patches/hurd-i386/submitted-libc_once.diff.

2006-12-18  Thomas Schwinge  <tschwinge@gnu.org>

	* bits/libc-lock.h (__libc_once_else): New definiton.
	* sysdeps/mach/bits/libc-lock.h: Likewise.
	* sysdeps/mach/hurd/bits/libc-lock.h: Likewise.
	* nptl/sysdeps/pthread/bits/libc-lock.h: Likewise.
	* sysdeps/posix/getaddrinfo.c (getaddrinfo): Use __libc_once_else and a
	new local function instead of using implementational details.

Date: 2007-10-28 19:40:34 +0000 (Sun, 28 Oct 2007)
New Revision: 2630

2007-10-28  Aurelien Jarno  <aurelien@aurel32.net>

	* bits/libc-lock.h (__libc_once_get): New definiton.
	* linuxthreads/sysdeps/pthread/bits/libc-lock.h: Likewise
	* nptl/sysdeps/pthread/bits/libc-lock.h: Likewise.
	* sysdeps/mach/bits/libc-lock.h: Likewise.
	* sysdeps/mach/hurd/bits/libc-lock.h: Likewise.
	* sysdeps/posix/getaddrinfo.c (getaddrinfo): Use __libc_once_get
	instead of using implementational details.

glibc-2.8/debian/patches/hurd-i386/submitted-libc_once.diff 3151
