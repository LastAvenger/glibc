2012-05-10  Thomas Schwinge  <thomas@schwinge.name>

	[BZ #3748]
	* bits/libc-lock.h (__libc_once_get): New macro.
	* sysdeps/mach/bits/libc-lock.h: Likewise.
	* sysdeps/mach/hurd/bits/libc-lock.h: Likewise.
	* sysdeps/posix/getaddrinfo.c (getaddrinfo): Use __libc_once_get
	instead of using implementation details.

nptl/
2012-05-10  Thomas Schwinge  <thomas@schwinge.name>

	[BZ #3748]
	* sysdeps/pthread/bits/libc-lockP.h (__libc_once_get): New macro.
